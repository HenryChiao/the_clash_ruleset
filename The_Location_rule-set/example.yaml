# WiFi Calling æ­£ç¡®é…ç½®ç¤ºä¾‹
# 
# é‡è¦è¯´æ˜ï¼š
# WiFi Calling å¿…é¡»é€šè¿‡å¯¹åº”å›½å®¶çš„ä»£ç†èŠ‚ç‚¹æ‰èƒ½æ­£å¸¸å·¥ä½œ
# ä¸èƒ½ä½¿ç”¨ DIRECTï¼ˆç›´è¿ï¼‰ï¼Œå¦åˆ™æ— æ³•è¿æ¥åˆ°è¿è¥å•†æœåŠ¡å™¨
#
# ä½¿ç”¨æ–¹æ³•ï¼š
# 1. æ ¹æ®æ‚¨çš„è¿è¥å•†æ‰€åœ¨å›½å®¶ï¼Œé€‰æ‹©å¯¹åº”çš„å›½å®¶èŠ‚ç‚¹ç»„
# 2. å°†è§„åˆ™é…ç½®ä¸­çš„ç­–ç•¥ç»„åç§°æ›¿æ¢ä¸ºæ‚¨å®é™…ä½¿ç”¨çš„ç­–ç•¥ç»„åç§°
# 3. å¦‚æœæœ‰å¤šä¸ªè¿è¥å•†ï¼Œå¯ä»¥åˆ›å»ºå¤šä¸ªè§„åˆ™é›†åˆ†åˆ«å¤„ç†

# ========================================
# æ–¹æ¡ˆä¸€ï¼šå•è¿è¥å•†é…ç½®ï¼ˆæ¨èï¼‰
# ========================================
proxy-groups:
  # æ ¹æ®è¿è¥å•†æ‰€åœ¨å›½å®¶åˆ›å»ºå¯¹åº”çš„ç­–ç•¥ç»„
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: select
    use:
      - your-proxy-provider  # æ›¿æ¢ä¸ºæ‚¨çš„ä»£ç†æä¾›è€…åç§°
    filter: '(?i)ç¾|ç¾å›½|us|united states|america'
  
  - name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹
    type: select
    use:
      - your-proxy-provider
    filter: '(?i)è‹±|è‹±å›½|uk|united kingdom|britain'
  
  - name: ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹
    type: select
    use:
      - your-proxy-provider
    filter: '(?i)åŠ æ‹¿å¤§|canada|ca'
  
  - name: ğŸ“ WiFi Calling
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹  # ç¾å›½è¿è¥å•†é€‰è¿™ä¸ª
      - ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹  # è‹±å›½è¿è¥å•†é€‰è¿™ä¸ª
      - ğŸ‡¨ğŸ‡¦ åŠ æ‹¿å¤§èŠ‚ç‚¹  # åŠ æ‹¿å¤§è¿è¥å•†é€‰è¿™ä¸ª
    # æ ¹æ®æ‚¨çš„å®é™…æƒ…å†µï¼Œå¯ä»¥åˆ é™¤ä¸éœ€è¦çš„é€‰é¡¹

rule-providers:
  wificalling:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/HenryChiao/the_clash_ruleset/main/The_Location_rule-set/wificalling.yaml"
    path: ./ruleset/wificalling.yaml
    interval: 86400

rules:
  # WiFi Calling è§„åˆ™ - ä½¿ç”¨ä¸“ç”¨ç­–ç•¥ç»„
  - RULE-SET,wificalling,ğŸ“ WiFi Calling
  # ... å…¶ä»–è§„åˆ™

# ========================================
# æ–¹æ¡ˆäºŒï¼šå¤šè¿è¥å•†é…ç½®
# ========================================
# å¦‚æœæ‚¨ä½¿ç”¨å¤šå¼ ä¸åŒå›½å®¶çš„ SIM å¡ï¼Œéœ€è¦ä¸ºæ¯ä¸ªè¿è¥å•†é…ç½®ç‹¬ç«‹è§„åˆ™

proxy-groups:
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: select
    use:
      - your-proxy-provider
    filter: '(?i)ç¾|ç¾å›½|us|united states'
  
  - name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹
    type: select
    use:
      - your-proxy-provider
    filter: '(?i)è‹±|è‹±å›½|uk|united kingdom'
  
  - name: ğŸ“ AT&T WiFi Calling
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
  
  - name: ğŸ“ Vodafone WiFi Calling
    type: select
    proxies:
      - ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹

rule-providers:
  # AT&T WiFi Callingï¼ˆç¾å›½ï¼‰
  wificalling-att:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/HenryChiao/the_clash_ruleset/main/The_Location_rule-set/wificalling-us-att.yaml"
    path: ./ruleset/wificalling-att.yaml
    interval: 86400
  
  # Vodafone WiFi Callingï¼ˆè‹±å›½ï¼‰
  wificalling-vodafone:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/HenryChiao/the_clash_ruleset/main/The_Location_rule-set/wificalling-uk-vodafone.yaml"
    path: ./ruleset/wificalling-vodafone.yaml
    interval: 86400

rules:
  # æŒ‰è¿è¥å•†åˆ†é…ä¸åŒçš„ç­–ç•¥ç»„
  - RULE-SET,wificalling-att,ğŸ“ AT&T WiFi Calling
  - RULE-SET,wificalling-vodafone,ğŸ“ Vodafone WiFi Calling
  # ... å…¶ä»–è§„åˆ™

# ========================================
# æ–¹æ¡ˆä¸‰ï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜èŠ‚ç‚¹
# ========================================
# ä½¿ç”¨ url-test æˆ– fallback è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹

proxy-groups:
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½-è‡ªåŠ¨
    type: url-test  # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
    use:
      - your-proxy-provider
    filter: '(?i)ç¾|ç¾å›½|us|united states'
    url: 'http://www.gstatic.com/generate_204'
    interval: 300  # æ¯ 5 åˆ†é’Ÿæµ‹è¯•ä¸€æ¬¡
    tolerance: 50  # å»¶è¿Ÿå·®è·åœ¨ 50ms å†…ä¸åˆ‡æ¢èŠ‚ç‚¹
  
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½-æ‰‹åŠ¨
    type: select  # æ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
    use:
      - your-proxy-provider
    filter: '(?i)ç¾|ç¾å›½|us|united states'
  
  - name: ğŸ“ WiFi Calling
    type: select
    proxies:
      - ğŸ‡ºğŸ‡¸ ç¾å›½-è‡ªåŠ¨  # æ¨èï¼šè‡ªåŠ¨é€‰æ‹©æœ€ä¼˜èŠ‚ç‚¹
      - ğŸ‡ºğŸ‡¸ ç¾å›½-æ‰‹åŠ¨  # å¤‡é€‰ï¼šæ‰‹åŠ¨æŒ‡å®šèŠ‚ç‚¹

rule-providers:
  wificalling:
    type: http
    behavior: classical
    url: "https://raw.githubusercontent.com/HenryChiao/the_clash_ruleset/main/The_Location_rule-set/wificalling.yaml"
    path: ./ruleset/wificalling.yaml
    interval: 86400

rules:
  - RULE-SET,wificalling,ğŸ“ WiFi Calling
  # ... å…¶ä»–è§„åˆ™

# ========================================
# å¸¸è§è¿è¥å•†å›½å®¶å¯¹åº”è¡¨
# ========================================
# ç¾å›½ï¼šAT&T, T-Mobile, Verizon
# è‹±å›½ï¼šVodafone, EE, O2, Three
# åŠ æ‹¿å¤§ï¼šRogers, Bell, Telus
# æ¾³å¤§åˆ©äºšï¼šTelstra, Optus, Vodafone
# æ–°è¥¿å…°ï¼šSpark, Vodafone, 2degrees
# æ—¥æœ¬ï¼šNTT Docomo, au, SoftBank
# éŸ©å›½ï¼šSK Telecom, KT, LG U+
# æ–°åŠ å¡ï¼šSingtel, StarHub, M1
# é¦™æ¸¯ï¼šä¸­å›½ç§»åŠ¨, CSL, 3HK

# ========================================
# é”™è¯¯é…ç½®ç¤ºä¾‹ï¼ˆè¯·å‹¿ä½¿ç”¨ï¼‰
# ========================================
# âŒ é”™è¯¯ 1: ä½¿ç”¨ DIRECT
# rules:
#   - RULE-SET,wificalling,DIRECT  # é”™è¯¯ï¼WiFi Calling æ— æ³•ç›´è¿

# âŒ é”™è¯¯ 2: ä½¿ç”¨é”™è¯¯çš„å›½å®¶èŠ‚ç‚¹
# rules:
#   - RULE-SET,wificalling,ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹  # å¦‚æœæ˜¯ç¾å›½è¿è¥å•†ï¼Œè¿™æ ·é…ç½®ä¼šå¯¼è‡´æ— æ³•è¿æ¥

# âŒ é”™è¯¯ 3: ä½¿ç”¨å…¨å±€ä»£ç†ç»„
# rules:
#   - RULE-SET,wificalling,ğŸš€ èŠ‚ç‚¹é€‰æ‹©  # ä¸æ¨èï¼Œå¯èƒ½ä¼šé€‰æ‹©åˆ°é”™è¯¯å›½å®¶çš„èŠ‚ç‚¹

# ========================================
# è°ƒè¯•å’Œæµ‹è¯•
# ========================================
# 1. æŸ¥çœ‹ Clash æ—¥å¿—ç¡®è®¤è§„åˆ™åŠ è½½æˆåŠŸ
# 2. æµ‹è¯• WiFi Calling è¿æ¥ï¼š
#    - æ‰“å¼€æ‰‹æœºçš„ WiFi Calling åŠŸèƒ½
#    - ç¡®è®¤çŠ¶æ€æ æ˜¾ç¤º WiFi Calling å›¾æ ‡
#    - æ‹¨æ‰“æµ‹è¯•ç”µè¯
# 3. å¦‚æœæ— æ³•è¿æ¥ï¼Œæ£€æŸ¥ï¼š
#    - èŠ‚ç‚¹æ˜¯å¦åœ¨çº¿ä¸”å»¶è¿Ÿæ­£å¸¸
#    - èŠ‚ç‚¹æ‰€åœ¨å›½å®¶æ˜¯å¦æ­£ç¡®
#    - é˜²ç«å¢™æ˜¯å¦é˜»æ­¢ç›¸å…³ç«¯å£
#    - è¿è¥å•†æ˜¯å¦æ”¯æŒ WiFi Calling

# ========================================
# æ€§èƒ½ä¼˜åŒ–å»ºè®®
# ========================================
# 1. ä½¿ç”¨ä½å»¶è¿ŸèŠ‚ç‚¹
# 2. å¯ç”¨èŠ‚ç‚¹å¥åº·æ£€æŸ¥
proxy-groups:
  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹
    type: url-test
    use:
      - your-proxy-provider
    filter: '(?i)ç¾|ç¾å›½|us'
    url: 'http://www.gstatic.com/generate_204'
    interval: 300
    tolerance: 50
    lazy: false  # å¯ç”¨åå°æŒç»­æµ‹è¯•

# 3. åˆç†è®¾ç½®æ›´æ–°é—´éš”
rule-providers:
  wificalling:
    interval: 86400  # WiFi Calling è§„åˆ™ç›¸å¯¹ç¨³å®šï¼Œ24 å°æ—¶æ›´æ–°ä¸€æ¬¡å³å¯
